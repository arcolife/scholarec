stochast model check for multimedia
arxivcs0002004v1 csmm 4 feb 2000
jeremi bryan howard bowman and john derrick
comput laboratori univers of kent canterburi ct2 7nf uk
phone 44 1227 764000 email jderrickukcacuk
modern distribut system includ a class of applic in which nonfunct requir
are import in particular these applic includ multimedia facil where real time
constraint are crucial to their correct function in order to specifi such system it is necessari
to describ that event occur at time given by probabl distribut and stochast automata
have emerg as a use techniqu by which such system can be specifi and verifi
howev stochast descript are veri gener in particular they allow the use of gener
probabl distribut function and therefor their verif can be complex in the last few
year model check ha emerg as a use verif tool for larg system in thi paper
we describ two model check algorithm for stochast automata these algorithm consid
how properti written in a simpl probabilist realtim logic can be check against a given
stochast automaton
addit key word and phrase distribut system stochast automata model check
1 introduct
in thi paper we describ and compar two model check algorithm for stochast
automata the reason for build such model check algorithm is to support
the verif of nonfunct properti in distribut multimedia system
the advent of distribut multimedia applic such as video conferenc
collabor virtual environ video on demand etc place great demand on
the specif and design of such system becaus of the need to describ and
verifi nonfunct requir bowman et al 1998 these nonfunct
requir typic involv real time constraint such as place bound on endnam j bryan
address comput laboratori univers of kent at canterburi canterburi kent ct2 7nf
phone 44 1227 827697
name h bowman
address comput laboratori univers of kent at canterburi canterburi kent ct2 7nf
phone 44 1227 823815
name j derrick
address comput laboratori univers of kent at canterburi canterburi kent ct2 7nf
phone 44 1227 827570
permiss to make digit or hard copi of part or all of thi work for person or classroom use is
grant without fee provid that copi are not made or distribut for profit or direct commerci
advantag and that copi show thi notic on the first page or initi screen of a display along
with the full citat copyright for compon of thi work own by other than acm must
be honor abstract with credit is permit to copi otherwis to republish to post on
server to redistribut to list or to use ani compon of thi work in other work requir prior
specif permiss andor a fee permiss may be request from public dept acm
inc 1515 broadway new york ny 10036 usa fax 1 212 8690481 or permissionsacmorg
2
j bryan h bowman and j derrick
toend latenc and are often call qualiti of servic qo bowman et al 1998
requir becaus they reflect the overal qualiti of deliveri as oppos to the
function aspect
in order to specifi and verifi such constraint it is necessari not onli to be
abl to describ determinist time concern but also probabilist and stochast
system that is in practic time cannot be assum to be fix determinist time but event can occur at differ time with particular probabl
therefor it is necessari to describ time that occur accord to certain probabl distribut for exampl in a network specif it is not suffici to
assum that the packet deliveri arriv at fix predetermin time instead we
need to model the system where they might arriv at time determin by for
exampl an exponenti distribut
there are now a number of techniqu which can be use to describ such system eg queue system kleinrock 1975 generalis stochast petrinet
marsam et al 1984 markov chain stewart 1994 generalis semimarkov process glynn 1989 stochast process algebra hillston 1996 and stochast automata dargenio 1999 etc in thi paper we consid stochast automata which
are relat to time automata alur and dill 1994 we defin two model check baier and kwiatkowska 1998 algorithm for them
stochast automata are a veri promis specif and verif paradigm
in particular they allow the studi of both function and nonfunct requir within the same descript give a more complet view of overal perform than say a queue theori descript of the problem they also support
not just exponenti distribut but gener distribut the issu here is the
follow in a stochast specif we need to associ a distribut function
f with an action a so that we can describ the probabl of the time delay after
which a can happen stochast automata natur allow gener distribut
in contrast say to stochast process algebra which usual restrict themselv to
exponenti distribut hillston 1996
in practic it is unrealist to onli consid exponenti distribut and it is
necessari for arbitrari distribut eg uniform gamma determinist etc to
be consid for exampl it is often assum that packet length are exponenti distribut howev in realiti thi is not the case rather they are either
of constant length as in atm cell tanenbaum 1996 or they are uniformli distribut with minimum and maximum size as in ethernet frame tanenbaum
1996 stochast automata allow such arbitrari distribut to be use
there are ostens two way to move from the tractabl case of exponenti
distribut to the less tractabl case of generalis distribut one approach
is to make small generalis of markov chain by allow limit form of
nonmemoryless behaviour see eg gspn marsam et al 1984 howev the
problem with thi approach is that there will alway be class of distribut
that cannot be model the altern is to allow ani distribut but then
use heurist and coars approxim techniqu to contain the problem of intract the major of work on thi topic follow the first of these approach
howev here we investig the feasibl of the second approach and thu we impos few constraint on the gener of the distribut we allow in our stochast
automata
becaus stochast automata are relat to time automata verif strategi for stochast automata can be deriv by use the extens work on verif for time automata see eg larsen et al 1997 daw et al 1995 henzing
et al 1997 the particular verif techniqu we consid is model check alur et al 1990 thi is perhap the most success techniqu to have arisen
stochast modelcheck for multimedia
system
automaton
properti
tempor logic
formula
model checker
system model formula
fig 1
system doe not
model formula
model checker
from concurr theori the basic approach is to show that an automaton descript of a system satisfi a tempor logic properti see figur 1
in accord with a number of other worker eg baier et al 1999 we view the
applic of model check to analysi of stochast system as a veri excit
combin sinc it provid a form of generalis transient analysi for exampl the properti error u1000 error 001 state that the probabl of first
reach an error state within 1000 time unit is less than 1 percent and whether
a particular stochast system satisfi thi properti can be investig
in defin our model check algorithm we draw heavili on the experi of
model check time automata eg larsen et al 1997 howev the move from
time to stochast lead to new issu that must be tackl in particular mani
of the properti that we wish to verifi are inher probabilist convent
model check allow us to answer question such as is a particular sequenc of
event possibl but in stochast model check we want to ask what is the
probabl of thi sequenc of event to do thi we will check an automaton
against a simpl probabilist tempor logic
we present two approach to model check stochast automata both approach are enum in the sens that in show whether a properti hold
they enumer reachabl configur of the system howev the method by
which they determin the probabl of be in a particular configur are quit
differ specif one deriv probabl by integr the relev probabl densiti function while the second respond to the difficulti incur in
evalu these integr which will becom clear dure the paper by employ
a discretis process
the structur of the paper is as follow in section 2 we introduc stochast automata illustr by a simpl exampl in section 3 we defin a small probabilist
realtim logic in which we can express simpl properti that we wish to check
our stochast automata against the first algorithm is present in section 4 and
the second is present in 5 section 6 look at an exampl of the oper of the
second algorithm and section 7 consid some issu of correct and converg relat to the second algorithm and section 8 look at the time and space
complex we conclud in section 9
2 stochast automata
in thi section we introduc stochast automata use a small exampl stochast
automata are relat to time automata alur and dill 1994 howev stocha
3
4
j bryan h bowman and j derrick
tic clock set are use instead of the strictli determinist time use in
time automata we begin with the formal definit of stochast automata then
present a simpl exampl we use the definit of stochast automata present
in dargenio et al 1998
definit 1 a stochast automaton is a structur s s0 c a f where
s is a set of locat with s0 s be the initi locat c is the set of all
clock and a is a set of action
s a pfin c s is the set of edg if s and s are state a is an action
ac
and c is a subset of c then we denot the edg s a c s by s s
a
and we say that c is the trigger set of action a we use s s as a shorthand
ac
notat for cs s
s pfin c is the clock set function and indic which clock are to
be set in which state where pfin c is the finit powerset of clock
f c r 0 1 assign to each clock a distribut function such that for
ani clock x f xt 0 for t 0 we write fx for f x and thu fx t state
the probabl that the valu select for the clock x is less than or equal to t
each clock x c ha an associ random variabl with distribut fx to
facilit the model check we introduc a function which associ locat
with set of atom proposit
s pap
where ap is the set of atom proposit
it is necessari to impos some limit on the stochast automata which
can be use with the model check algorithm in particular we requir that
each clock distribut function fx must have a posit finit upper bound and
a nonneg lower bound and must be continu between these bound the
finit constraint mean that there are certain distribut function which we
must approxim we further assum that clock are onli use on transit
eman from state in which they are set
as an exampl consid the simpl packet produc which is a compon in a
larg multimedia specif in figur 2 thi is written
s0 s1 s2 s0 x y z
tryagain conc send f ail fx fy fz
where
s0 tryagain x s0 s0 conc x s1
s1 send z s0 s0 f ail y s2
s0 x y s1 z s2
and the distribut function for clock x y and z are
fx t 2t t2 if t 0 1
0 if t 0
1 otherwis
fy t t2 if t 0 1
0 if t 0
1 otherwis
stochast modelcheck for multimedia
tryagain x
s0
s1
conc x
xy
z
send z
fail y
s2
1
1
fxt
1
fzt
fyt
time
fig 2
time
time
the packet produc
and
fz t t if t 0 1
0 if t 0
1 otherwis
as depict the horizont axi measur time and the vertic axi measur the
probabl of the clock be set to a valu less than that time
the packet produc start in locat s0 and attempt to establish a connect
with it medium three option are possibl at thi stage either the medium allow
a connect the medium tell the packet produc to tri again or the medium take
too long and the connect fail is time out these option are model in the
automaton by set clock x and y accord to the function fx and fy if clock
x expir first then there is a nondeterminist choic between the transit label
conc which move the automaton to state s1 and the transit label tryagain
which move the automaton back to state s0 thi choic is nondeterminist
becaus in realiti it would depend on the medium which we have not specifi
here if clock y expir first then action fail is trigger we say that y is the
trigger set of fail and the automaton move to state s2 thi correspond to the
medium take too long to respond and noth further happen
thi exampl ha been chosen becaus it is small enough that we can show in
their entireti the set of configur that our model check algorithm enumer thu it can be use to illustr our two algorithm but in addit we have
chosen it becaus it is canon in the sens that it illustr the key concept of
stochast automata eg simultan enabl of multipl transit gener
nondetermin the reader should also notic that thi is a good exampl of a
situat in which steadyst analysi is not interest specif in the steadi
state all the probabl mass will be in state s2 thu the sort of question we
wish to ask about such a system are about it transient behaviour eg what is
the probabl of reach state s2 within a particular period of time and inde
thi is exactli the type of question we will be abl to formul with the logic we
introduc in the next section and answer with our model check algorithm
5
6
j bryan h bowman and j derrick
3 a probabilist realtim tempor logic
31 the logic
in thi section we introduc a simpl probabilist tempor logic the purpos of
the logic is to express properti that we wish to check the stochast automaton
against the logic we defin allow us to check a rang of such properti
recal that the region tree contain nondetermin and so we resolv thi use the notion of adversari see for exampl baier and kwiatkowska 1998 an
adversari of a stochast automaton can be thought of as a schedul which resolv ani nondeterminist choic which the stochast automaton must make
an adversari may vari it behaviour accord to the previou behaviour of the
automaton or it may prescrib that for all nondeterminist choic a particular
branch is alway prefer see dargenio 1999 for exampl of adversari
we assum that when we wish to model check a properti against an automaton
we are also given an adversari to resolv the nondetermin within the automaton
without thi adversari enum analysi would not be possibl the provis
of an adversari is a prerequisit of model check we can now for exampl
answer such question as given a stochast automaton and an adversari is the
probabl of a send event occur within 5 time unit greater than 08
the syntax of our logic is
tt ap 1 2 1 u c 2 p
tt ap 1 2
where 1 u c 2 p is a path formula the path formula can onli be use
at the top level they cannot be nest thi is becaus the model check
algorithm we give can onli evalu path formula from the initi state and is a
necessari restrict of the current approach further c n natur number
ap is an atom proposit p 0 1 is a probabl valu and
we can defin a number of deriv oper for exampl other proposit
oper are defin in the usual wayff tt
1 2 1 2
1 2 1 2
and we can defin a number of abbrevi of a number of tempor oper
c p
c p
p
p
1 u c 2
1 u c 2
tt u c p
c p
0 p
0 p
1 u c 2 1
1 u c 2 0
where and are the branch time tempor logic oper for all and
exist emerson 1990 see baier et al 1999 for similar definit
with thi syntax an exampl of a valid formula that we can check would be
tt u 10 send 08 which say that the probabl of reach a send event within
10 time unit is greater than 08
stochast modelcheck for multimedia
32 model check
it should be clear that sinc we do not allow tempor formula to be nest we can
use the follow recip in order to model check a formula of our logic against a
stochast automaton a
1 for each until subformula ie of the form 1 u
individu model check to ascertain whether
c 2
p in perform an
a 1 u c 2 p
2 replac each until formula in by tt if it correspond model check wa
success or ff otherwis
3 replac each atom proposit in by tt or ff depend upon it valu in the
initi locat of a
4 is a now ground term ie truth valu combin by a proposit connect and thu it can simpli be evalu to yield a truth valu the
automaton is a model of if thi evalu yield tt and is not otherwis
thi recip employ standard techniqu apart from the individu check that
a 1 u c 2 p and thi is what our two algorithm address
4 the regiontre algorithm
in thi section we introduc the first algorithm
in model check we take a tempor logic predic and seek to establish
whether it is true for our particular specif for exampl we might tri to
establish whether the abov stochast automaton ha the follow properti is
the probabl that a packet will be success sent within ten time unit greater
than eighti percent in order to do thi we need to defin a mean by which we
can check the stochast automaton against thi logic to achiev thi the tempor
logic and the specif must have the same semant model in dargenio et al
1998 stochast automata are given a semant in term of probabilist transit
system and so the tempor logic is given a semant in term of probabilist
transit system as well see appendix a
41 region tree
for practic purpos howev we cannot construct the probabilist transit
system sinc it is an infinit structur both in branch and depth we instead
construct a region tree from the specif thi is finit branch but may
be infinit in depth thu a particular region tree repres an unfold of the
stochast automaton to a certain depth in fact we use the tempor logic formula
to construct a probabilist region tree which is use to verifi the tempor logic
formula more precis the region tree is expand until suffici probabl ha
been accumul to ascertain the truth or falsiti of the formula thi will becom
more clear shortli in thi section we describ how to construct region tree from
stochast automata
we begin with the definit of a valuat which we use to record the valu of
all the clock in a particular state at a particular moment in time the uniqu clock
a c which we add to the set of clock is use to facilit the model check it
keep track of the total time elaps in the execut of the stochast automaton
but play no part in the behaviour of the automaton
definit 2 a valuat is a function v c a r such that vx
or vx xmax where xmax is the maximum valu to which clock x can be set
7
8
j bryan h bowman and j derrick
def
if d r0 v d is defin by x c av dx vx d the function
minv return the valu of the smallest defin clock
sinc we assum that clock are onli use in the state in which they are set
there is no need to rememb their valu onc the state ha been exit onli
the clock a maintain it valu the rest are set to at the initialis of a
stochast automaton clock a is set to some natur number we will show later
how we choos thi it depend on the formula we are interest in and all other
clock are undefin we defin thi initi valuat as on if oa n
we also need a notion of equival between the valuat which will enabl
us to construct the region within the probabilist region tree the issu here is
the follow although the size of the tree will be potenti infinit at each node
we wish to have finit branch we achiev thi becaus although there are an
infinit number of valuat possibl for ani particular state there are a finit
number of valuat equival class thi give us the finit branch
v
definit 3 two clock valuat v and v are equival denot v
provid the follow condit hold
for each clock x c a either both vx and v x are defin or vx
and v x
for everi defin pair of clock x y c avx vy v x v y
the same clock are defin in each valuat and the order of the valu of the
defin clock is all that is import
the reason that the order of the valu of the defin clock is all that is import
in the definit of a valuat equival class is that the action are trigger
by the first clock to expir therefor we onli need to know whether one clock
is greater than or less than anoth also note that there is a probabl of zero
that differ clock are set to the same valu thi is becaus all distribut are
assum to be continu
we are now in a posit to describ how a region tree is construct from a
stochast automaton intuit we build the region tree by unfold the
stochast automaton at each newli reach state we calcul all possibl
valuat up to and the probabl of each one then from each of these
statevalu pair we calcul the possibl new state and repeat
suppos we wish to construct the region tree for the stochast automaton in
figur 2
the result region tree up to a particular level of unfold is given in figur 3
the first node is label with the locat s0 where the sa start the valuat
01 ie 1 sinc clock x and y have not yet been set and clock a is set
to valu one clock a is set accord to the time valu on the formula in which
we are interest we will give the exampl formula in section 42 the clock x
and y are then set give a potenti 3 6 differ equival class howev
these can be reduc to two by observ that clock a will be fix on 1 and
xmax ymax 1 and the probabl of either x or y be set to exactli 1 is
zero1 use the convent that we subscript the clock variabl by the iter
number in order to distinguish differ set of the same clock the two possibl
equival class are therefor v0 y v0 x v0 a and v0 x v0 y v0 a
where v0 a 1 in both case for conveni we will write x0 for v0 x y0 for
v0 y and a0 for v0 a
1 thi coincid of a x
max and ymax is assum in order to simplifi our present the next
iter illustr the gener case
stochast modelcheck for multimedia
3
s1
6
s1
14
s0
z1a1
7
s0
30
s0
31
s0
32
s0
33
s1
34
s0
s0
27
x1y1a1
35
s1
28
36
s2
37
s2
24
a1y1x1
s1
15
s1
a1z1
25
0
s0
01
1
s0
s0
a1x1y1
4
s0
x0y0a0
8
s0
16
s0
a1y1x1
26
9
s0
17
s0
x1a1y1
s0
a1x1y1
18
10
s0
19
s1
s0
x1a1y1
20
s1
29
s0
11
x1y1a1
21
s0
12
22
s2
23
s2
s0
s0
y1a1x1
s0
y1x1a1
y1a1x1
2
s0
5
s2
y0x0a0
13
s0
y1x1a1
fig 3
the region tree
if clock x is set to less than clock y the automaton will allow time to pass in
locat s0 and each clock will count down until clock x reach zero then
either action tryagain or action conc will fire the choic is nondeterminist and
the automaton will enter locat s0 or s1 respect the time at which thi
occur will obvious vari accord to the initi valu of the clock x the possibl
locat enter are depict by region 3 and 4 in the region tree in figur 3
where clock x and y sinc they are irrelev in these region are not record
the initi valu of clock a when move from region 1 to either region 3 or region
4 will be 1 x0 we will denot thi valu as a1 thu it will be in the rang 0 1
if clock y is set to less than clock x repres by region 2 then the action
fail fire caus the automaton to enter locat s2 and thi is depict by region
5 in the region tree again all we can say about the valu of clock a at thi stage
is that it lie in the rang 0 1
from region 3 there are two possibl either clock z is set to less than a1
region 6 or it is set to greater than a1 region 7 from region 6 the action send
will occur befor the clock a expir move the automaton to locat s0 and the
region tree to region 14 from region 7 the clock a will expir befor the action
send occur the region tree move to region 15 and the automaton remain in
9
10
j bryan h bowman and j derrick
state s1
from region 4 locat s0 both clock x and y are reset accord to their
probabl densiti function to valu x1 and y1 sinc we cannot now be sure
about the valu of clock a we have 3 6 equival class and these are
repres by region 8 to 13 when we unfold the sa anoth level
in region 8 and 9 a1 is less than the new initi valu of clock x and y these
region repres the case where clock a expir befor either of x1 and y1 when
we consid a particular tempor logic formula thi will repres the case where
time ha run out and so the region tree move to either region 16 if y expir
first or region 17 if clock x expir first
region 10 and 11 repres the valuat equival class where x1 is less
than both a1 and y1 and so from these clock x will expir first either action
tryagain or conc will be perform and the stochast automaton will enter either
locat s0 or s1 region 1821
region 12 and repres the valuat equival class where y1 is less than
both a1 and x1 so clock y will expir first action fail will fire and the automaton
will enter locat s2 region 2223
the region tree can be expand further if necessari there is no need to continu to expand region 5 15 16 17 22 and 23 becaus in all of these either the
clock a ha expir or the stochast automata ha reach locat s2 which is
a deadlock state and there is no further inform to be gain in figur 3
further region are deriv from region 14 in the same way as abov these are
need when we build the probabilist region tree in the next section
42 probabilist region tree
given a stochast automaton adversari and formula 1 u c 2 p the
model check algorithm consist of a number of iter which are repeat
until the formula is found to be either true or fals
an iter unfold the region tree by expand each leaf node at each iter stage there are two step the first step resolv the nondeterminist choic
in the newli expand region tree use the given adversari the second step then
calcul the probabl on each node in the newli expand part of the tree
the region tree figur 3 repres an unfold of the stochast automaton
without the nondeterminist choic be resolv the probabilist region tree
figur 4 record the resolut of the nondeterminist choic and the probabl at the final node repres the chanc of take the particular sequenc of
action that end in that node
at each iter we updat the inform we have on the probabl of a path
satisfi the formula to do thi we defin three new proposit and each node
of the probabilist region tree is label with p f or u p if it ha pass it is the
end of a path which model the bound until formula f if it ha fail it is
the end of a path which cannot model or u if it is undecid we also have two
global variabl p and f which keep run total of the probabl of the
pass and fail path
the basic idea of the model check algorithm is that we check the valu of p
and f at each stage and if we cannot deduc from these the truth or falsiti of
the formula we are check we look more close at the undecid node that is
we extend the undecid path by each possibl subsequ action label these new
node p f or u and calcul their probabl we then add these probabl
to p and f and repeat
we will begin by demonstr the techniqu for an exampl the full algorithm
appear as appendix b consid the exampl stochast automaton figur 2
stochast modelcheck for multimedia
3
5
3
s1
6
s1
14
u
24
s0
7
30
s2
31
s1
33
s1
s0
27
x1y1a1
35
s1
28
36
s2
37
s2
s0
a1y1x1
z1a1
s1
15
f
s1
a1z1
7
30
0
s0
01
1
f
25
s0
f
a1x1y1
s0
x0y0a0
26
s0
u
x1a1y1
s0
u
p
y1a1x1
29
s0
y1x1a1
2
s0
5
s2
y0x0a0
fig 4
p
p
1
6
the probabilist region tree
let us consid the formula
0 1 u 1 2 09
where 0 resp 1 2 is the proposit that we are in state s0 resp s1 s2
the question2 we are therefor ask is is the probabl of reach locat s2
fail within one time unit greater than 09
note that a steadi state analysi will tell us onli that the automaton will fail
reach state s2 eventu but here we want to obtain inform about the
transient behaviour of the automaton the nondeterminist choic that ha to be
made is between locat s1 and s2 we will consid the benevol adversari ie
the one that alway choos locat s1
consid region 1 first figur 3 it ha two possibl outgo transit and
the choic between them is made nondeterminist so we must refer to the
adversari which choos locat s1 that is region 3 region 4 is not gener
we note that the valu of clock a is greater than zero so time ha not run out
2 in
fact the algorithm can easili be adapt to handl question such as what is the probabl
to within some of a formula such as 0 u 1 2 be true
11
12
j bryan h bowman and j derrick
and that proposit p0 p1 is true so the tempor logic formula is abl to be
satisfi so thi region is label with u undecid
in region 5 proposit p2 is true and clock a is still greater than zero so thi
region is label as pass p and region 5 becom a termin node
in region 6 a1 is greater than the new initi valu of clock z and therefor the
send action will fire befor the clock a expir the region is therefor label u
in region 7 a1 is less than the new initi valu of clock z and therefor time
will run out befor the send action ha a chanc to fire the region is therefor
label f
from region 6 the send action move the automaton to locat s0 region 14
and from here there are 6 possibl for the set of the clock
region 24 and 25 repres the valuat equival class where a1 is less
than x1 and y1 sinc clock a will expir befor either clock x or clock y we know
that these path will not reach locat s2 in less than one time unit so region
30 and 31 will be label f the remaind of the tree is gener in a similar
manner
figur 4 repres two unfold in order to determin whether the formula
is true we also have to calcul the probabl on the node if the sum of the
pass and the sum of the fail node is suffici to tell us whether the formula is true
then we can stop here otherwis we unfold the tree anoth level
to determin the probabl on the arc we need to use probabl densiti
function px py and pz of the function fx fy and fz which we find by differenti fx fy and fz between their upper and lower bound and set to zero
everywher els
px t 2 2t if t 0 1
0 otherwis
py t 2t if t 0 1
0 otherwis
pz t 1 if t 0 1
0 otherwis
evalu the function fx at a point a give the probabl that clock x is set
to a valu less than a and if a b then fx a fx b give the probabl that
clock x is set to a valu between a and b provid a and b are constant the same
calcul use the correspond probabl densiti function pdf would be
a
b px xdx which at first sight appear more complic the advantag is that
these function can be use to calcul the probabl that clock x is set to a valu
less than y where y is a random variabl set accord to the distribut function
fy if for exampl we wish to calcul the probabl of the equival class
y
in region 1 v0 x v0 y v0 a where v0 a 1 we would evalu 0 px xdx
to give us a function that return the probabl that v0 x is between 0 and y
multipli thi by the pdf py y and integr between zero and one
1
y
px xdxpi ydi
0
0
which give us the probabl that x will be less than y where x and y are random
variabl conform to the distribut function fx and fy
we will now evalu the probabl of some of the arc in the exampl in the
follow we will continu to subscript the clock variabl by the iter number
in order to distinguish differ set of the same clock
stochast modelcheck for multimedia
1
1z1
1
py y0 dy0 px x0 dx0 pz z1 dz1
0
0
1
x0
1
1
py y0 dy0 px x0 dx0 pz z1 dz1
0
1z1
x0
tabl 1
the integr
in our exampl to determin the probabl on arc 0 2 where the valu to
which clock y is initi set which we will refer to as y0 is less than the valu to
which clock x wa initi set x0 y0 x0 we perform the doubl integr
1
x0
2y0 dy0 2 2x0 dx0
0
0
which evalu to 16
arc 0 1 must have the valu 1
and can be calcul as
1
1
6
5
6
sinc it is the onli other possibl
1
2y0 dy0 2 2x0 dx0
0
x0
these two arc repres the set of the clock and are therefor instantan
from region 2 the onli region which can be reach is the leaf node region 5
and therefor the arc 2 5 ha probabl 1
calcul probabl on the path through region 3 is more complic consid arc 3 6 first in fact we must calcul the probabl of the path 0 1 3 6
in it entireti rather than determin separ the condit probabl of arc
3 6 we do thi as follow
the clock set inform we know is the first time the clock x and y are
set the initi valu of x is less than the initi valu of y x0 y0 and when z1
is set the sum of x0 and z1 is less than the initi valu of clock a x0 z1 1
1
these constraint are captur as the combin of the integr x0 py y0 dy0
1z
to ensur that x0 y0 1 0 1 px x0 dx0 to ensur that x0 z1 1 and
1
0 pz z1 dz1 sinc all constraint have been captur in the first two integr
the combin is given as the first integr in tabl 1 and equal 53
the path 0 1 3 7 differ onli in the fact that a1 1 x0 is less than z1
7
and can be calcul as the second integr in tabl 1 which equal 30
the onli
differ is that px x0 is integr between 1 z1 and 1
7
at thi stage in the algorithm p 61 and f 30
sinc f 1 09 we can
deduc that the formula is fals and in thi case there is no need to unfold further
the node label u
the accuraci with which we know the valu of p and u will increas as the
probabilist region tree is extend and in some case it may need to be extend
to infin for perfect accuraci howev we can achiev accuraci to within an
arbitrari toler with a finit probabilist region tree
the major drawback of thi algorithm is it complex with everi new unfold
of the probabilist region tree not onli doe the number of node to be consid
increas but also the number of integr requir to determin the probabl
on a singl node increas exponenti it therefor becom intract after a
few iter thi is the issu we tri to tackl with the second algorithm rather
13
14
j bryan h bowman and j derrick
than integr the probabl densiti function we discretis the rang of the
function and work with the result approxim
5 the matrix algorithm
in thi section we present an overview of the second algorithm the second algorithm take a stochast automaton sa togeth with a bound until tempor
logic formula tl a time step paramet and an adversari pick for conveni
we will present onli the case where tl is of the form 0 u c 1 p minor modif to the algorithm would allow ani of p p or p we use the atom
proposit 0 and 1 as part of the formula becaus anyth more complex can
be reduc to these by standard model check techniqu use c guarante
that the algorithm will termin although we discuss the c case in section 61
a singl iter of the algorithm will return one of three result true fals or
undecid if it return true then the automaton model the formula if it return
fals then the automaton doe not model the formula if it return undecid then
the algorithm wa unabl to determin whether the automaton model the formula
in thi case the algorithm can be reappli with a smaller valu for the timestep
the question of converg to the correct answer as tend to zero is discuss
in section 7 for the remaind of thi section we assum to be fix
a stochast automaton ha a finit number of clock each with a probabl
distribut function pdf for each state the set of clock ha an arbitrari
order and the algorithm make use of thi ordering3 we assum that each clock
ha nonzero lower and upper bound on the valu to which it can be set the
first of these is a new constraint and wa not requir for the first algorithm thi
ha been done so that can be initi chosen to be less than the minimum of all
these lower bound
the algorithm work by creat a snapshot of the automaton at each time point
n n n4 and extract some global inform about the probabl of the
formula 0 u c 1 be satisfi at thi point5 to build the next snapshot the
algorithm pick out at each time point n the transit that the automaton is
capabl of dure the next interv of length becaus is less than the minimum
of all the clock lower bound a maximum of one transit per path can occur in
each interv record all possibl state of the automaton at each time point is
therefor enough to record all the possibl transit
the algorithm stop when either enough inform ha been gather to determin the truth or falsiti of the formula or enough time ha pass so that n c
and allow time to pass further will make no differ to the inform we
alreadi have in thi case the result undecid is return
51 data structur
the princip data structur use by the algorithm are matric for each state
s in the stochast automaton we deriv a matrix for a given time t which is a
ration number and calcul as n denot matrix t which is a record of
the probabl of the variou combin of clock valu in state s at time t
each matrix matrix t will have s dimens each dimens is associ with a particular clock and the order of the dimens correspond to the
order of the clock the dimens associ with a clock c will have cmax
3 howev
the choic of order is arbitrari and doe not carri ani mean ani order will
be suffici
4 we will speak of the time instant gener by n n n as time point
5 we also requir that nn c which ensur that one of the snapshot will be at exactli time
c
stochast modelcheck for multimedia
entri where cmax is the largest valu to which the clock c can be set and cmax
is
the smallest integ greater than or equal to cmax
for
a
clock
c
we
will
abbrevi
i
c
imax
by ni
the valuat function v give the valu of a particular clock vci is the valu
of clock ci
each entri in the matrix matrix t is the probabl that at time point t the
automaton is in state s and each clock is within a particular time rang thu the
valu matrix tk1 kn is the probabl that at time point t the automaton
is in state s and vci ki 1 ki for each clock ci
a further data structur we shall need is livet which is the set of state live
at time t ie their matric at time t contain at least one nonzero entri and the
formula is still undecid in order to get an accur pictur of the automaton at
time t we must take into account all state live at time point t
a snapshot of the automaton at time t is the set of all matric matrix t
where s is in livet
let prci ki 1 ki be the probabl that clock ci is initi set to a
valu in the rang ki 1 ki befor the algorithm proper begin we calcul
all these valu from the clock probabl distribut function which are enter
into the algorithm as part of the stochast automaton
52 variabl
the algorithm also use a number of auxiliari variabl
prob t is the probabl of enter state s dure the time rang k 1 k
where t k and is defin for state s live at time k 1 and s live at time
k
new statess t is the set of state which can be reach from a state s dure a
time rang k 1 k
total pass is a probabl valu it is increment at each iter the iter of the algorithm correspond to the time point and total pass record the
probabl of the automaton have pass the formula at that time total f ail is
also a probabl valu it record the probabl of the automaton have fail
the formula as the algorithm progress
error is an upper bound on the possibl error of total pass and total f ail
after an iter we know that the actual probabl of the automaton have
pass the formula is in the rang total pass total pass error and similarli for
total f ail
53 overview
the second algorithm is given in detail in appendix c we begin here with a
pseudocod descript
build matrixs0 0
check formula against s0 and t 0
undecid
repeat
t t
foral locat s in livet
build matrix t
updat livet
foral locat s in livet
pass
fail
record possibl new locat
increment probabl of enter new locat
increment error
15
16
j bryan h bowman and j derrick
check formula against locat
if pass then add probabl to total pass
if fail then add probabl to total f ail
if undecid then updat matrix t
until formula ha pass or
formula ha fail or
t ha reach the limit set by the formula
set all locat undecid at last iter to fals
if total pass f ormulaprob then output pass
elseif total f ail 1 f ormulaprob then output fail
els output undecid
we now present the formula for initi calcul matric then describ the
algorithm in overview outlin the procedur involv
if there are n clock in state s then matrix t is calcul use the probabl
distribut function of the clock in state s as follow
1 k1 n1
n
1 kn nn matrix tk1 kn
prvcl kl 1 kl
l1
the algorithm begin by calcul matrixs0 0 where s0 is the initi state
of the stochast automaton
live0 will either be s0 or the empti set accord to whether the formula
tl is made true or fals by state s0 or whether we cannot yet decid thi is
determin as follow if state s0 model proposit 1 then the formula tl is
immedi true and live0 is the empti set otherwis if s0 model 0 we cannot
yet decid and so live0 contain s0 if the state model neither proposit then
the formula tl is immedi fals and live0 is the empti set
if the initi step doe not determin whether the formula is true or fals we
perform a number of iter each iter build the snapshot at time point
t base upon the snapshot at time point t the sequenc of snapshot build
progress more inform as to whether the stochast automaton ha pass
or fail the formula
in the case of a bound until formula with a c subscript6 the number of
iter is finit ie the algorithm alway termin becaus the iter termin either when suffici inform ha been extract to determin whether
the formula pass or fail or after the c th iter sinc the formula cannot
becom true after time c
if the inform at time t is not enough to determin the truth or falsiti of the
formula we build the snapshot for time point t we now describ an individu
iter
an iter consist of two section in the first we consid all of the state
which are current undecid these are all the state in livet for each state we
creat the matric at time t updat livet and calcul prob t for
state s which can be reach in the interv t t in the second we look at all
state which can be reach in the interv t t and consid them with respect
6 ie
0 u c 1 p see section 61 for a discuss of how c time bound are handl
stochast modelcheck for multimedia
to the tempor logic formula we then either updat the global probabl if
the state caus the formula to pass or fail otherwis we updat the respect
matric
note that in thi algorithm a matrix is updat at most twice onc within procedur new time matrixref to appendix c if the state wa live at the previou
time and onc within the procedur new state matrix if the state is reachabl via
a transit in the previou interv
531 creat and updat matric we begin with some necessari notat
let us assum is a fix ration number greater than zero
definit 4 if c1 cn are the clock on state s a valuation7 is the vector
of result of the valuat function vci from clock to r which give the valu of
each of the n clock
two valuat v and v are equival if
ci kl nvci kl 1 kl v ci kl 1 kl
a valuat equival class or clock configur is a maxim set of equival valuat
if is understood we can abbrevi thi configur as k1 kn for a
n
state s and a time point t the probabl l1 prvcl kl 1 kl is an
s tclock configur probabl or just a clock configur probabl when
s and t are understood
there are two differ procedur for updat a matrix the first encapsul in the procedur new time matrix correspond to the situat within the
stochast automaton where time pass but the state remain unchang in thi
case we must shift the clock configur probabl in the previou matrix down
by one index step which correspond to time pass and add the result to the
matrix we are updat
we also at thi stage determin the new state which can be reach from the
current state dure the time pass and the probabl of enter these state
we do thi by look at all the clock configur where at least one of the indic
ha the valu one if the clock are set within such a configur then we know
that at least one clock will expir dure the ensu timestep
if onli one index in the configur ha the valu one then onli one clock can
expir and onli one state can be enter from thi clock configur and so that
state is ad to the set of state which can be enter from the current state at
the current time
if more than one index in the configur ha the valu one then we simpli do
not go ani further into the automaton and the configur probabl is ad
to error
the second way to updat a matrix correspond to a transit from one state to
anoth within the automaton it is describ in the procedur new state matrix
for each matrix entri we calcul the clock configur probabl multipli it
by the probabl of move into thi state at thi time and add it to the matrix
entri we are updat
532 termin of an iter when the iter termin it will output one of three result true fals or undecid true mean that the automaton model the tempor formula ie sa 0 u c 1 p fals mean that
7 we
alter the definit of valuat slightli here for the second algorithm
17
18
j bryan h bowman and j derrick
sa 0 u c 1 p and undecid mean that the algorithm could not accumul enough inform to decid whether or not the automaton model the
formula
the algorithm make the output decis base on the three global variabl
total pass total f ail and error
total pass is a lower bound on the probabl that the stochast automaton
model the formula and total f ail is a lower bound on the probabl that the
stochast automaton doe not model the formula error is the largest amount by
which total f ail or total pass may be wrong in a sens it record the size of the
uncertainti introduc by the choic of
if neither of these situat hold then the error introduc by the algorithm
are too larg to determin an answer with thi valu of in thi case we can
rerun the algorithm with a smaller and in section 7 we show that the sum of
the error tend to zero as tend to zero note howev that in the case where
the probabl that sa model 0 u c 1 is exactli p we cannot guarante that
there will be a small enough to allow the algorithm to gener a true or a fals
thi is the sort of limit that ha to be accept when work with generalis
distribut
6 exampl
the second algorithm requir slightli more stringent restrict on the stochast
automaton than the first one becaus the clock distribut function must have
posit lower bound as oppos to the nonneg lower bound requir by
the first therefor in order to illustr the second algorithm we will use the
automaton in figur 2 but alter slightli each of the clock distribut function
by shift each of them half a time unit to becom
fx t 2t t2 if t 12 23
0 if t 12
1 otherwis
fy t t2 if t 21 32
0 if t 12
1 otherwis
and
fz t t if t 12 32
0 if t 21
1 otherwis
in thi section we will consid the tempor formula a0 a1 u 23 a2 12
where si ai i 1 2 3
we now illustr thi algorithm by appli it to the example8 we set equal
to 21
section a b and c below correspond to the section ab and c in the algorithm
descript in appendix c within section c line number correspond to the line
number of the algorithm
8 the
type of situat where thi algorithm would do veri badli is if one clock ha a veri small
lower bound and all the rest have a veri high lower bound thi is accentu if the first clock
is hardli use it might even be that the state where the first clock is use is unreach or ha
a veri low probabl of be reach thu a criterion for the algorithm to work effici is
that all pdf lower bound are similar
stochast modelcheck for multimedia
section a thi section initialis all the variabl to zero and calcul all the
probabl of clock fall in the rang 0 2 etc from the probabl
distribut function enter as part of the stochast automaton
in our exampl the probabl that the clock x y and z are in the rang
0 2 or 2 3 are given by
x y z
0 0 0 0
2 43 14 12
2 3
1
4
3
4
1
2
these are easi to obtain from the clock probabl distribut function inde the eas of determin these probabl is the main benefit of thi algorithm
and contrast with the intract manner in which the integr explod in the first
algorithm
section b the initi state s0 doe not model a1 but it doe model the proposit a0 and so the procedur init matrix is call thi return matrixs0 0
which is as follow
y
3 0 83 18
2 0 83 18
1 0 0 0
1 2 3 x
and is easili deriv from the probabl abov the procedur also set live0
to s0
if nx is the upper bound of x and ny is the upper bound of y there will be
nx 1 entri on the x axi and ny 1 entri on the y axi so in thi case
where nx 32 ny 32 and 21 we get a 3 3 matrix
thi matrix tell us eg that when the clock in the initi state are first set
the probabl of clock x be set within the rang 2 and clock y be set
within the rang 2 3 is 38 that is for the clock configur 2 2 3
the clock configur probabl is 38
section c we now enter the iter part of the algorithm where each iter
correspond to increas the time by one time unit and the snapshot produc
at the end of iter n correspond to a view of the automaton at time n the
three global probabl values9 are all still zero line 11a so ct current time
becom onli the state s0 is live at time zero so new time matrix is call
line 6 for matrixs0 thi return a number of paramet matrixs0
new statess1 prob and error
the procedur new time matrix will return the matrixs0 as
y
3 0 0 0
2 38 18 0
1 38 18 0
1 2 3 x
where each clock ha advanc one time unit from matrixs0 0 so at time
the probabl of clock x be within the rang 0 and clock y be within the
rang 2 is 38
9 these
are the probabl valu that are updat throughout the algorithm total pass total f ail
and error
19
20
j bryan h bowman and j derrick
the probabl of stay in state s0 for at least half a time unit is 1 thi
follow from the fact that no clock can be set to less than 12 time unit thu
probs0 1
none of the edg valu those with at least one clock in the rang 0 of
the previou time matrix matrixs0 0 is nonzero so there is no possibl of
ani clock reach zero and caus a transit to fire the second half of the
procedur line 1023 which would determin the new state reach from state
s0 is therefor not execut and the global probabl valu total pass total f ail
and error are all still zero new statess0 will be return as sinc no new
state can be reach at time
the next step line 711 of section c is to calcul the live state at time
and sinc remains0 true it is possibl to remain in state s0 at time we
includ s0
sinc there are no state which can be reach from state s0 in the time interv
0 line 1222 of section c are not execut
all of the global probabl valu are still zero ie we dont have enough
inform to decid the truth or falsiti of the formula at thi stage line 11a
of section c and 2 2 we have more time in which to gain more inform
line 23 of section c so we begin a second iter
on the second iter of the while loop ct is set to 2 onli s0 wa live
at the last iter live s0 so at line 6 we call new time matrix for
matrixs0 2
thi again return a number of paramet eg matrixs0 2 becom
y
3 0 0 0
2 0 0 0
1 18 0 0
1 2 3 x
where the entri matrixs0 21 1 is taken from the clock configur 2 2
in the previou time matrix matrixs0 and thu the probabl of stay in state
s0 in the interv 2 is 81 howev thi is not the final version of matrixs0 2
becaus some of the clock configur lead to transit which lead back to state
s0
all the other clock configur 1 1 1 2 and 2 1 in matrixs0 lead
to transit line 1022 of procedur new time matrix are execut for each of
these three configur
for clock configur 1 1 clock x is arbitrarili chosen to fire and we assum
that the adversari pick choos the action conc lead to state s1 line 13a of
the procedur add state s1 to new statess0 2 and probs1 2 becom 38 line
14 clock configur 1 1 is one where some error may be introduc into the
algorithm result choos clock x and action conc meant that we go to a state
where the formula t l can still be true but choos the other clock may not lead
to such a state we therefor allow for the possibl error introduc here by ad
the clock configur probabl to error which becom 38 clock configur
1 2 and 2 1 are dealt with similarli but error remain constant
now the new time matrix procedur is finish and line 711 of section c determin the valu of live2 which is s0 s1 s2 becaus at time 2 the automaton
may be in ani state
line 1222 of section c consid each new state that can be reach in time
interv 2 state s0 still allow the tempor logic formula to be true and so
procedur new state matrix is call line 17 howev probs0 2 0 and
stochast modelcheck for multimedia
therefor matrixs0 2 is not alter
state s1 still allow the tempor logic formula to becom true line 13 and so
procedur new state matrix is call line 17 the probabl of enter state
s1 in thi interv is 68 so matrixs1 2 is
0 83 38
1 2 3 z
in state s2 the formula is true and so probs2 2 81 is ad to total pass line
14
in the final iter the global probabl valu becom total pass 18
total f ail 38 and error 48 the iter stop becaus the valu of time
becam too larg not becaus the global probabl contain enough inform to make a decis thi mean that total pass 81 is a maximum possibl
probabl valu of the formula a0 a1 u 32 a1 with ani clock order and
total pass error 83 is a minimum possibl probabl valu
thu sinc we wish to determin whether the actual probabl valu is greater
than 21 the algorithm will output fail
if we were interest in a similar formula with a probabl valu in the rang
0 18 we could reduc the size of and take snapshot eg everi 41 time unit
thi for the reason outlin in section 7 will reduc the size of the error variabl
61 unbound until formula
as just present the second algorithm onli handl until formula of the form
1 u c 2 p
howev a combin of the second and first algorithm yield a method to verifi
unbound until formula ie those of the form
1 u c 2 p
the basic idea is to observ that verif of a formula such as 1 u c 2 can
be split into a conjunct of separ verif
a check that 1 hold at all time until c time unit have elaps and
b check that there exist an x c such that 2 hold at time x and that for
all time strictli greater than c and less than x 1 hold
thu we can model check formula such as 1 u c 2 p in the follow way
i run the obviou slight adapt of the second algorithm to check that a
hold thi will finish with a certain amount of probabl mass in the variabl
total fail and no probabl mass in total pass the reason for the latter is that
pass state can onli be reveal onc time ha pass beyond c in addit
livec will indic the locat that are still undecid ie from which we
must explor further
ii run the first algorithm use livec as the start locat and the initi
time region determin from the remain matric thi can be done in a
straightforward manner howev notic that run the first algorithm in
thi situat doe not incur the problem of intract that it doe in the
gener case specif sinc the time bound on the until ha been satisfi we
ostens onli have an untim until verif consequ probabl can
be assign to node without requir the global clock to be taken into account
and thu they can be evalu local henc the exponenti explos in
the number of integr to be consid doe not occur
21
22
j bryan h bowman and j derrick
7 correct and converg
for a singl run with fix we wish to prove two thing that the algorithm
termin with pass impli that the automaton model the formula and that
the algorithm termin with fail impli that the automaton doe not model the
formula
if the algorithm output pass then the variabl total pass must be greater than
p where p is taken from the tempor formula 0 u c 1 p the onli place
where total pass get increment is line 14 of section c see full algorithm in
appendix c if the current state q model 1 and all previou state in the path
model 0 we add the probabl of enter the state q at the current time point
if the sum of these probabl is greater than p then the algorithm output pass
we will consid the case when the algorithm output pass consid the initi
state note that for ani clock configur the probabl of all path which
commenc with the clock be set somewher within thi configur is equal to
the clock configur probabl furthermor for an arbitrari state s and time
c and configur the probabl of all path which go through thi configur
at thi time is the probabl of the configur multipli by the probabl of
reach that state at that time
the probabl of reach state s at time c is the second paramet pass to
the procedur new state matrix10
if everi valuat in a configur correspond to the same automaton transit and thi transit is the final one in a path which model the formula then we
add the clock configur probabl multipli by the probabl of reach
that state at that time to total pass
thi is the onli way in which the algorithm add to the variabl total pass sinc
the algorithm onli output pass if total pass is greater than the formula probabl
p it is clear that the algorithm will onli output pass if the automaton model the
formula
if more than one clock in the configur is in the rang 0 then more
than one of the clock will have reach time 0 in the interv we are consid
and so the clock configur probabl is ad to error line 12 of procedur
new time matrix
a similar argument appli in the case where the algorithm output fail
therefor the algorithm is sound in the sens that if we are given a definit
answer thi answer is correct there remain of cours the question of converg
to the correct answer and the follow theorem summaris the situat
theorem 1 for everi automaton sa and proposit 0 and 1 it is the case
that if sa model 0 u c 1 with probabl p then for ani error e greater than
zero there is a timestep greater than zero such that for the formula 0 u c 1
q the algorithm will onli return undecid if q pe pe
first note that n independ singl variabl continu probabl distribut
function f1 fn can alway be combin to give a singl n variabl probabl
distribut function which is continu in all dimens f x1 xn f1 x1
fn xn
for conveni consid a locat with two outgo transit and two clock
x and y with distribut function fx and fy becaus fx and fy are both contin10 in
fact it is greater than or equal to thi sum becaus some rout through the transit system
may have pass or fail the formula alreadi and therefor would be consid no further by
the algorithm
stochast modelcheck for multimedia
yxd
yxd
y
x
fig 5
upper bound on error with clock x and y
uou if we set f x y fx x fy y we can by the note abov say that
0 0f x x f x x
we will show that for ani desir size of error we can choos a suitabl small
timestep
m
now 0 f x x f x x dx 11 the probabl of the clock valuat
fall between the two 45 degre line in figur 5 is greater than the sum of
all contribut to the error variabl repres by the squar in the figur
sinc the number of locat in the stochast automaton is finit say ns and for
bound until formula with less than subscript the maximum number of visit to
ani locat is finit say nv for ani desir error e we must ensur that for everi
locat for the multivari function associ with that locat we choos
e
such that ns n
if the timestep is set to the smallest necessari to ensur
v
e
then total error provid by
that everi locat provid error less than ns n
v
e
one locat over all time will be less than ns and the total error provid by all
locat will be less than e
8 complex measur
81 time complex
the time complex of the algorithm discuss in section 5 depend on a number
of factor name t n1 n2 and s the explan of these paramet is as
follow
t is the valu of time given in the timebound until formula a ut b p
is the chosen timestep
s is the number of state in the automaton
n1 is the largest number of clock in a singl state and
n2 is the largest posit finit upper bound of all the clock
an upper bound on the number of matric which need to be built in a singl
iter is s where s is the set of all state in the automaton
to calcul the time complex we also need to calcul the size of the largest
matrix each matrix is multidimension and n2 will be the maximum number
of entri over all matric and all dimens for exampl in the exampl in
11
m minxmax ymax where xmax is the largest valu to which clock x can be set
23
24
j bryan h bowman and j derrick
section 6 all the matric had 2 dimens and the maximum number of entri in
ani dimens wa 3 sinc 21 and n2 32
an upper bound on the size of the largest matrix will therefor be the number
of element in the largest dimens rais to the power of the largest number of
clock on a singl state
the time complex is thu bound by the time taken to updat all the possibl
matric in each iter of the while loop in the algorithm multipli by the
maximum number of iter the algorithm will perform in the worst case thi
latter valu is t therefor the time complex is
t
n2
n1 s
although thi is exponenti the expon n1 is someth which should in gener be fairli small 3 becaus we onli allow clock to be use from the state in
which they are set
in fact the algorithm could be optimis to provid a better time complex
by limit the size of the matric to min t n2 sinc there is no need to consid
the oper of the clock beyond the limit set by the time bound on the tempor
formula the size of the largest matrix would therefor be less than min t n2 n1
where n1 is the largest number of clock in a singl state
an upper bound on the time complex would therefor be
t n2
t
min n1 s
the time complex also reli heavili on and the bigger the the lower the
time complex to see the relationship with note that the upper bound can be
rewritten as
1
n1 1
t n2 n1 s
82 space complex
an upper bound on the space complex will be proport to the product of
the size of the biggest matrix and the largest number of matric which need to
be store at one time the size of the largest matrix is less than n2 n1 from
time complex calcul and the largest number of matric which need to be
store at ani one time is twice the number of state in the automaton 2 s
the upper bound on space complex is therefor
2
n2 n1
s
9 conclus and further work
in thi paper we have present two algorithm for model check bound until
formula against stochast automata both of these algorithm allow system to
be describ use continu probabl distribut and we believ that thi
repres an import advanc
the princip advantag of the first algorithm is it gener the clock may
be set accord to ani function provid the correspond probabl densiti
function is integr the major drawback of the algorithm is it complex with
everi new unfold of the probabilist region tree not onli doe the number of
node to be consid increas but also the number of integr requir to
determin the probabl on a singl node increas exponenti
stochast modelcheck for multimedia
the princip advantag of the second algorithm is it effici the discretis of the probabl function mean that the calcul requir are consider simpler a limit in comparison to the first algorithm is that the
probabl distribut must have a finit lower bound
in addit an advantag of both the algorithm is that sinc the complet
model is at no point gener the state space explos which typic hinder
model check is contain in particular all data structur apart from those
which reflect undecid node ie u label region in the first algorithm and live
locat in the second algorithm can be delet in thi sens the algorithm yield
a form of onthefli explor onli keep inform about the leav of
the explor tree
further work on the second algorithm will includ relax the restrict impos on the stochast automata particularli the abil to set and use clock
anywher in the automaton be abl to do thi would allow parallel composit
it would also be good to increas the express of the logic allow nest
until or greater than queri and to extend the model check algorithm itself
to allow queri such as what is the probabl of 0 u c 1 and receiv a
probabl valu for an answer
acknowledg the research present here is support by the uk engin and physic scienc research council under grant number grl95878
a specif architectur for the valid of realtim and stochast qualiti of servic thank are due to cowork on thi project for their input into
thi work gordon and lynn blair from lancast univers also to pedro
dargenio joostpiet katoen and holger hermann in particular pedro observ on clock equival for stochast automata have greatli influenc our
approach
refer
alur r courcoubeti c and dill d 1990 modelcheck for realtim system
in proceed of 5th lic 1990 pp 414425
alur r and dill d 1994
a theori of time automata theoret comput scienc 126 183235
baier c katoen jp and hermann h 1999 approxim symbol model check
of continuoustim markov chain in proceed of concur99 number 1664 in lnc
1999 pp 146162
baier c and kwiatkowska m 1998 model check for a probabilist branch time
logic with fair distribut comput 11 125155
bowman h blair l blair g s and chetwynd a 1998 formal specif of
distribut multimedia system univers colleg london press
dargenio p 1999
algebra and automata for time and stochast system ph d
thesi univers of twent
dargenio p r katoen jp and brinksma e 1998 an algebra approach to the
specif of stochast system extend abstract in d gri and wp de roever
ed proceed of the ifip work confer on program concept and method
procomet98 1998 pp 126147 chapman hall
daw c olivero a tripaki s and yovin s 1995 the tool krono in r alur
t a henzing and e d sontag ed proceed of workshop on verif
and control of hybrid system iii volum 1066 of lnc octob 1995 pp 208219
springerverlag
emerson e a 1990 handbook of theoret comput scienc chapter 16 tempor
and modal logic pp 9961072 elsevi scienc publish
glynn p 1989
a gsmp formal for discret event simul in proceed of the
ieee volum 771 1989 pp 1423
henzing t a ho ph and wongtoi h 1997
hytech a model checker for
25
26
j bryan h bowman and j derrick
hybrid system softwar tool for technolog transfer 1 110122
hillston j 1996
a composit approach to perform model distinguish
dissert in comput scienc cambridg univers press
kleinrock l 1975 queue system volum i theori john wiley new york
larsen k g pettersson p and yi w 1997
uppaal in a nutshel intern
journal on softwar tool for technolog transfer 1 12 oct 134152
marsam m a cont g and balbo g 1984 a class of generalis stochast petri
net for the perform evalu of multiprocessor system acm transact on comput system 2 2 may 93122
shiryayev a n 1984 probabl springer seri in soviet mathemat springerverlag
stewart w j 1994 introduct to the numer solut of markov chain princetown univers press princetown new jersey
tanenbaum a s 1996 comput network prentic hall
appendix
a semant
a1 probabilist transit system
the definit of the semant of stochast automata is given in term of probabilist transit system the definit of probabilist transit system is
reproduc from dargenio et al 1998
n is the set of nonneg integ r is the set of real number and r0 the
set of nonneg real for n n let rn denot the nth cartesian product of
def
r r0
a probabl space is a structur f p where is a sampl space f is a algebra on and p is a probabl measur on f in thi work as in dargenio
et al 1998 we consid onli probabl space isomorph to some borel space
defin in a real hyperspac whose coordin come from independ random
variabl we denot by rf1 fn the probabl space rn brn pn where
brn is the borel algebra on rn and pn is the probabl measur obtain from
f1 fn a given famili of distribut function see shiryayev 1984 for detail
let p f p be a probabl space let d be a biject we lift d
def
def
to subset of da da a a and defin f da a f now
def
it is clear that dp f p d1 is also a probabl space sinc dp
is basic the same probabl space as p we say that d is a decor and we
refer to dp as the decor of p accord to d thi is use when we come to
give a semant to stochast automata
definit 5 let p h denot the set of probabl space f p such that
h a probabilist transit system is a structur t 0 l t
where
1 and are two disjoint set of state with the initi state 0 state
in are call probabilist state and state in are call nondeterminist
state
2 l is a set of label
3 t p is the probabilist transit relat
4 l is the label or nondeterminist transit relat
l
l
l
we use to denot l for and
l
for l
stochast modelcheck for multimedia
sinc we are interest in time system we set l a r0 where a is a set of
action name a time action transit will be describ as ad which indic
that the action a occur exactli d time unit after the system ha been idl
definit 6 a valuat is a function v c r0 such that vx
xmax where xmax is the maximum valu to which clock x can be set the set of
def
all valuat is v if d r0 v d is defin by x cv dx vx d
we assum the set of clock is order so if c c we can write c for the order
form of c and c i for the ith element let c c n c and d rn we
defin vc d by
d i if x c i for some i 1 n
otherwis
def
vc dx
thi definit will be use when we explain how clock valu chang as state
chang it differ from the definit given in dargenio et al 1998 becaus there
clock not in the set c maintain their valu through thi oper thi is becaus
in dargenio et al 1998 clock may be use to trigger action in ani state not
just the state in which they are set in thi work howev in order to simplifi the
model check we insist that clock are onli use in the state in which they are
set and therefor there is no need to rememb their valu onc the state ha been
exit
the main obstacl now in construct the probabilist transit system semant is in show how the clock probabl function are use to construct the
probabl space we do thi by defin a decor function discuss in section a1
let sa s s0 c a f be a stochast automaton let s be a locat
in s and n s let v be a valuat in v let v vsd d
rn v we defin the decor function dv rn s v 1 by
def
dv d s vsd 1 notic that dv is a biject in the next definit
we use the probabl space rfx1 fxn decor accord to some dv
definit 7 let sa s s0 c a f be a stochast automaton the
def
actual behaviour of sa is given by the pt isa s v 0 s v
1 s0 0 0 a r0 t where in the initi valuat 0 clock a is set to
some natur number chosen accord to the prtl function see section 3 and
each other clock is undefin t and are defin as follow
sx1 xn
t sv0dv rfx1 fxn
prob
ax
s s d r0 v dx 0
by
d 0d s s v d y 0
ad
act
sv1 vd0
within a stochast automaton two form of uncertainti may aris one is the
probabilist uncertainti associ with the clockset although we know
27
28
j bryan h bowman and j derrick
which clock are to be set the choic of valu for these clock is probabilist
thi is where the stochast element of the model aris and is defin by rule
prob the other is the nondeterminist uncertainti that aris if two action
are simultan abl to be perform and is defin use the rule act thi
nondetermin is resolv use an adversari definit 10
definit of a ptspath
definit 8 a ptspath is a finit or infinit sequenc of state
0 0 1 1
where 0 is the initi state for each i there exist a probabl space s f p
such that t i s f p i s and i i1
definit 9 an sapath is a finit or infinit sequenc
s0 v0 s0 v0 s1 v1 s1 v1 sn vn sn vn
such that
v0 mean no clock are set
vi rfx1 fxn where t si vi 0 dv rfx1 fxn each valuat
vi is a possibl result of the clock set function
ad
si vi 1 si1 vi1 0 for some d time action transit must be allow
by the sa
finit path end on a probabilist state
an sapath is like a run of the sa expand with clock valu
definit 10 an adversari of an sa is a function map sequenc of state
to state
adv s0 s1 sn sn1
such that s0 s1 sn sn1 is a run of the sa
note that adversari do not make ani refer to time
with an adversari an sa becom determinist the correspond pt contain
no nondetermin either
if
s0 0 s0 v0 s1 v1 s1 v1 sk vk sk vk
is a finit sapath then i si and x is the state at time x
rfx1 fxn is the borel space rn brn pn where pn is the uniqu probabl measur obtain from rfx1 fxn
now for all j k set aj to be the maxim set of valuat equival to vj
which lead to state sj1
let
cs0 a0 s1 sk1 ak1 sk
denot the cylind set which contain all path start at s0 and go through
all state sj j k and valuat set aj j k
stochast modelcheck for multimedia
the probabl measur p r on f p aths0 12 is identifi by induct on k by
p rcs0 1 and for k 0
p rcs0 a0 ak sk1 p rcs0 a0 ak1 sk p ak
where p ak is the probabl of the set ak and is taken from the relev borel
space
a2 prtl semant
in thi section we introduc the semant for the tempor logic prtl
to facilit model check we use probabilist transit system as a semant
model for the definit of prtl but in order to do thi we must resolv two
problem the first is that prtl is a realtim logic it enabl refer to
specif instant in time and the abstract definit of ptss dargenio et al
1998 doe not contain refer to time thi is easili solv we simpli use
the pt gener by a stochast automaton thi contain much more detail
state inform in particular the valu of clock
the second problem is that the pt contain nondeterminist inform and thi
nondetermin must be resolv befor we can use the pt to assign a semant
to our logic we do thi use adversari
recal the syntax of prtl
tt ap 1 2 1 u c 2 p
tt ap 1 2
where c n a is an atom proposit p 0 1 is a probabl valu and
the path formula can onli be use at the outermost level they cannot be
nest thi is becaus the model check algorithm onli evalu path formula
from the initi state
definit 11 if sa s s0 c a f is a stochast automaton and
p t s 0 l t is the result probabilist transit system then
s v l ar0 and 0 s0 0 we must also introduc a function
which map sa locat to the logic proposit true in that locat
we onli need to use the probabilist state to defin the logic sinc onc a probabilist state ha been enter the behaviour of the automaton is complet determin until the first clock expir
the simpl formula are defin in the convent way for each probabilist
region but the until formula are defin onli for the initi region 0 the
model check algorithm doe not yet allow path formula to be establish for an
arbitrari region
s tt
s a provid a s
s 1 2 provid s 1 and s 2
s provid s
12 p ath
0
is all path possibl from s0 and f p aths0 is the smallest algebra on p aths0
29
30
j bryan h bowman and j derrick
if is an sapath and a path formula then
1 u 2 iff k 0k 2 0 i ki 1
1 u t 2 iff x tx 2 y 0 xy 1
and
def
p t s 1 u t 2 p iff p robs0 1 u t 2 p where p robs0 p r
p aths0
therefor the probabilist transit system p t s model the prtl 1 u
p provid p robs0 1 u t 2 p
t 2
b first algorithm
here we give the definit of the first model check algorithm for bound until
formula we will consid a prtl formula of the form 1 u c 2 p less
than p queri may be handl in a similar way
assum an adversari adv and that each sa locat is map to either 1 or
1 and to either 2 or 2 note that the algorithm can easili be extend to
the more gener case where locat contain set of atom proposit
add the new clock a to the set of all clock
construct the prg node s0 0c
set s s0
if s 1 then stop with no els
repeat
for each possibl valuat equival class vi from s a form the node
s vi
for each new node s vi choos a subsequ nondeterminist node sj
accord to the adversari adv
for each new nondeterminist node sj
label p if sj 2 and va 0
label f if sj 1 or sj 2 or va 0
label u otherwis
for each node label with either p or f calcul the probabl of the correspond path
if p pr v p then stop with ye
if f pr v 1 p then stop with no
otherwis repeat for each node label u
c second algorithm
in thi section we present a detail descript of the algorithm it is divid into
section a which initialis variabl section b the initi part of the algorithm
and section c the iter part procedur use are describ at the end
the line of code are prefac with number and the comment are delimit
with doubl star
section a
m odel checksa f ormula pick
note that the function pick is the adversari use in procedur new time matrix
we are assum a tl formula of the form a0 u t a1 p
stochast modelcheck for multimedia
the p could easili be chang the t is hardwir into the algorithm
we begin by initialis variabl
ct integ current time
ct 0
total pass and total f ail are real in 0 1
at ani point in the algorithm total pass is the accumul
probabl of all the pass path and total f ail is the accumul
probabl of all the fail path we initialis them both to zero
total pass 0
total f ail 0
error is a real in 0 1 it is the accumul probabl of all path
which becaus of the discretis of the algorithm we cannot determin exactli
thi is where the revis version of the algorithm differ from the initi one
it is initialis to zero
error 0
prob t is the probabl of move from anywher to locat s
at time t ie in interv t t
for all combin of locat and time we initialis prob
to zero
s si n
prob i 0
remain t is a boolean which is true if the probabl of remain
in locat s dure time interv t t is nonzero fals otherwis
they are all initialis to fals
s si n
remain i f als
livet is the set of locat activ at the end of
interv t t which
we need for calcul the inform for the next time interv
for all time valu we initialis live to the emptyset
i n
livei
we initialis all valu in all matric to zero
the are ns clock in locat s
s s
0 j n
1 i1 n1
1 in nn matrix ji1 in 0
call procedur for calcul probabl of clock fall in the rang
0 2 etc thi come directli from the clock pdf
and is onli calcul onc it is need for determin the clock
probabl
c is the set of all clock and f is the set of clock probabl function
thi procedur return pr which is need in new state matrix
and init matrix
clock conf ig probsc f pr
31
32
j bryan h bowman and j derrick
section b
consid initi locat of sa s 0
if s 0 a 1 then formula is trivial true
if s 0 a1 then
total pass 1
if s 0 a 0 then formula is undecid and we must
unfold sa further
elseif s 0 a0 then
build the initi matrix ie matrix 0 0
thi will then contain the probabl
of all the differ clock set for locat s 0 at time zero
init matrixmatrix 0 0
the onli locat live at time zero will be s 0
live0 s 0
if s 0 doe not model a 0 or a 1 then formula is trivial fals
els
total f ail 1
end if
1
2
4
5
6
7
8
9
section c
each iter of the follow loop unfold the automaton by
one time step of state which caus the formula to
passfail are prune from the tree and their probabl ad to
total passtot f ail while the undecid state are record
for the next iter
we continu while the valu of total pass total f ail and error
are not enough to determin whether the formula is true or fals
repeat
increment current time
ct ct
for all state s that were live at the last clock tick
s livect
set current state to s
cs s
the procedur new time matrix return
matrixc ct the matrix for the current state at the current time
it also
updat the function prob with the probabl of remain
in the current state at the current time and the probabl of
move to differ state at the current time
it also updat the valu of error
new time matrixmatrixc ct new statesc ct remainc ct prob error
if the probabl of remain in current state at current time is zero
if remainc ct f als then
current state is not live at current time and
onli the state which can be reach from current state at current time
are ad to those live at current time
livect livect new statesc ct
els remainc ct true
the current state plu all state which may be reach from it at
the current time must be ad to the live state
stochast modelcheck for multimedia
livect livect cs new statesc ct
end if
end foral s livect
now we have livect and probc ct for all cs in livect
ie all the state we could be in at time ct and the probabl of
actual enter them in the previou time interv
for everi state which can be reach at the current
time we must see if it caus the formula to pass or fail in
which case we adjust the valu for total pass or
total f ail and remov the state from the live set if we cannot yet
tell whether the formula is true or fals we must build the statetim matrix
12
q livect
if q a1 then formula is true
13
if q a1 then
total pass is increment by the probabl of enter q
from the current state at the current time
14
total pass total pass probq ct
state q is remov from the live set
livect livect q
15
otherwis if q a0 and q is not a termin state
then the formula may still be true
so we must build matrixq ct and keep state q in the livect set
16
elseif q a0 q termin state then
the procedur new state matrix return
matrixq ct the matrix for state q at current time and requir
probq ct the probabl of enter state q from the current
state at the current time
17
new state matrixmatrixq ct probq ct
18
els if q doe not model a 0 or it is a termin state and also
it doe not model a 1 then the formula is fals
total f ail is increment by the probabl of enter q
from the current state at the current time
19
total f ail total f ail probq ct
state q is remov from the live set
20
livect livect q
21
end if
22
end foral for all state in livect
23 until total pass p formula ha pass
24
or
25
total f ail 1 p formula ha fail
26
or
27
error 1 p error p no possibl of a pass or a fail
28
or
29
ct t time up
30 if ct t then
all state undecid at the last iter are now fals so
total f ail is set to 1 total pass error
31
total f ail 1 total pass error
32 end if
output result base on the valu of
10
11
11a
33
34
j bryan h bowman and j derrick
total pass total f ail and error
33 if total pass p then
sa model formula
34 output pass
35 elseif total f ail 1 p
sa doe not model formula
36 output fail
37 els error are too larg cannot decid
38 output undecid
39 end if
thi procedur build the initi matrix
we assum there are n clock associ with thi state
and csl 0 is the lth clock
we abbrevi upper boundcsl 0 1 by nl
procedur init matrixmatrixs0 0
begin procedur
1 i1 n1
n
prcsl 0 il il
1 in nn matrixs0 0i1 in
l1
end procedur
procedur new time matrixmatrixc ct new statesc ct remainc ct prob error
thi procedur updat a matrix by increment time not by
chang state we can do thi by consid the valu in the previou time
matrix it also updat the function prob
and the variabl error
there are n clock in state cs
begin procedur
1 1 i1 n1
2 1 in nn
3
4
5
6
7
8
9
if one of the matrix indic is at it maximum valu then the
probabl valu in thi posit must be zero thi is
becaus thi procedur is alway the first to updat a statetim matrix
if l n il nl then
matrixc cti1 in 0
otherwis the valu in the matrix can be updat simpli from the
valu in the previou time matrix
els all clock ci are 1 and ni
matrixc cti1 in
matrixc cti1 in matrixc ct i1 1 in 1
we record the fact that it is possibl to remain in thi state
at thi time
remainc ct true
end if
stochast modelcheck for multimedia
9aend foral
we now pick out the posit in the previou time matrix which
when move forward one unit in time result in a new state
10 1 i1 n1
11 1 in nn
if more than one of the previou time matrix indic is one we know that
more than one of the clock will have reach zero by ct and so we
add the probabl to error
11a
if cl cl 1 1 then
12
error error matrixc ct i1 in
12a
els if cl cl 1 1
given the stochast automaton sa the state cs and the clock cc
s is the result state if the clock is associ with more than
one transit the function pick the adversari choos the
result state otherwis the state is the one determin by the
transit relat of the sa
s picksa cs cl
13
13a
new statesc ct new statesc ct s
the probabl of enter s at time ct
is increment by the matrix probabl
14
prob ct prob ct matrixc ct i1 in
22
end if line 11
23
end foral
24end procedur
thi procedur build a new matrix where the state is new rather than the time
we assum there are n clock associ with thi state
and csl is the lth clock
we abbrevi upper boundcsl 1 by nl
the valu in the matrix are calcul by multipli the clock
probabl by a factor of p where p is the probabl of
enter the state and ad thi valu to the valu alreadi in
the posit
procedur new state matrixmatrixc ct p
begin procedur
1 i1 n1
1 in nn matrixc cti1 in
n
prcsl il il
matrixc cti1 in p
l1
end procedur
35
